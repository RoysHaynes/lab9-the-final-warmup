<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>controller/todo-app.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="StorageService.html">StorageService</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StorageService.html#clear">clear</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StorageService.html#load">load</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StorageService.html#remove">remove</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="StorageService.html#save">save</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="TodoApp.html">TodoApp</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoApp.html#handleAddTodo">handleAddTodo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoApp.html#handleClearAll">handleClearAll</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoApp.html#handleClearCompleted">handleClearCompleted</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoApp.html#handleDeleteTodo">handleDeleteTodo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoApp.html#handleToggleTodo">handleToggleTodo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoApp.html#handleUpdateTodo">handleUpdateTodo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoApp.html#render">render</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="TodoForm.html">TodoForm</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoForm.html#handleInput">handleInput</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoForm.html#handleSubmit">handleSubmit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoForm.html#render">render</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="global.html#TodoItem">TodoItem</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#TodoItem#handleCancel">handleCancel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#TodoItem#handleDelete">handleDelete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#TodoItem#handleEdit">handleEdit</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#TodoItem#handleKeyDown">handleKeyDown</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#TodoItem#handleSave">handleSave</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#TodoItem#handleToggle">handleToggle</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#TodoItem#render">render</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="TodoList.html">TodoList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoList.html#render">render</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="TodoModel.html">TodoModel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoModel.html#addTodo">addTodo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoModel.html#clearAll">clearAll</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoModel.html#clearCompleted">clearCompleted</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoModel.html#deleteTodo">deleteTodo</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoModel.html#search">search</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoModel.html#subscribe">subscribe</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoModel.html#toggleComplete">toggleComplete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="TodoModel.html#updateTodo">updateTodo</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li>
</nav>

<div id="main">
    
    <h1 class="page-title">controller/todo-app.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * TodoApp – the **root** Lit component that glues the MVC layers together.
 *
 * It:
 * 1. Instantiates {@link StorageService} and {@link TodoModel}.
 * 2. Subscribes to model changes and keeps `this.todos` in sync.
 * 3. Dispatches user actions to the model.
 * 4. Renders the UI (stats, form, list, actions).
 *
 * @extends LitElement
 *
 * @fires TodoForm#add-todo → handled by {@link TodoApp#handleAddTodo}
 * @fires TodoItem#toggle-todo → handled by {@link TodoApp#handleToggleTodo}
 * @fires TodoItem#delete-todo → handled by {@link TodoApp#handleDeleteTodo}
 * @fires TodoItem#update-todo → handled by {@link TodoApp#handleUpdateTodo}
 *
 * @example
 * // In index.html
 * &lt;todo-app>&lt;/todo-app>
 */
export class TodoApp extends LitElement {
    /**
     * Reactive state – the current array of todo objects.
     *
     * @type {Array&lt;TodoItemData>}
     * @private
     */
    static properties = {
        todos: { state: true }
    };

    /**
     * Global CSS for the whole app.
     *
     * @type {CSSResult}
     */
    static styles = css`
    /* … (your existing CSS) … */
  `;

    /**
     * @param {StorageService} [storageService=new StorageService()] - Persistence layer.
     * @param {TodoModel} [model] - Optional pre-instantiated model (useful for testing).
     */
    constructor(storageService = new StorageService(), model) {
        super();
        /** @private */
        this.storageService = storageService;
        /** @private */
        this.model = model ?? new TodoModel(this.storageService);
        /** @private */
        this.todos = this.model.todos;

        // React to any model mutation
        this.model.subscribe(() => {
            this.todos = [...this.model.todos];
        });
    }

    /* --------------------------------------------------------------------- *
     *  Event handlers – each maps a custom event to a model method.
     * --------------------------------------------------------------------- */

    /**
     * Handles the `add-todo` event dispatched by `&lt;todo-form>`.
     *
     * @param {CustomEvent&lt;{text:string}>} e - Event payload.
     */
    handleAddTodo(e) {
        this.model.addTodo(e.detail.text);
    }

    /**
     * Handles the `toggle-todo` event from `&lt;todo-item>`.
     *
     * @param {CustomEvent&lt;{id:number}>} e
     */
    handleToggleTodo(e) {
        this.model.toggleComplete(e.detail.id);
    }

    /**
     * Handles the `delete-todo` event from `&lt;todo-item>`.
     *
     * @param {CustomEvent&lt;{id:number}>} e
     */
    handleDeleteTodo(e) {
        this.model.deleteTodo(e.detail.id);
    }

    /**
     * Handles the `update-todo` event from `&lt;todo-item>` (edit mode).
     *
     * @param {CustomEvent&lt;{id:number, text:string}>} e
     */
    handleUpdateTodo(e) {
        this.model.updateTodo(e.detail.id, e.detail.text);
    }

    /**
     * Clears **all** completed todos after user confirmation.
     *
     * @fires TodoModel#clearCompleted
     */
    handleClearCompleted() {
        if (confirm('Clear all completed todos?')) {
            this.model.clearCompleted();
        }
    }

    /**
     * Deletes **every** todo after user confirmation.
     *
     * @fires TodoModel#clearAll
     */
    handleClearAll() {
        if (confirm('Clear ALL todos? This cannot be undone.')) {
            this.model.clearAll();
        }
    }

    /* --------------------------------------------------------------------- *
     *  Rendering
     * --------------------------------------------------------------------- */

    /**
     * Renders the whole application UI.
     *
     * @returns {TemplateResult}
     */
    render() {
        return html`
      &lt;div class="app-container">
        &lt;h1>My Tasks&lt;/h1>
        &lt;p class="subtitle">Stay organized and productive&lt;/p>

        &lt;div class="stats">
          &lt;div class="stat-item">
            &lt;div class="stat-value">${this.todos.length}&lt;/div>
            &lt;div class="stat-label">Total&lt;/div>
          &lt;/div>
          &lt;div class="stat-item">
            &lt;div class="stat-value">${this.model.activeCount}&lt;/div>
            &lt;div class="stat-label">Active&lt;/div>
          &lt;/div>
          &lt;div class="stat-item">
            &lt;div class="stat-value">${this.model.completedCount}&lt;/div>
            &lt;div class="stat-label">Completed&lt;/div>
          &lt;/div>
        &lt;/div>

        &lt;todo-form @add-todo=${this.handleAddTodo}>&lt;/todo-form>

        &lt;todo-list
          .todos=${this.todos}
          @toggle-todo=${this.handleToggleTodo}
          @delete-todo=${this.handleDeleteTodo}
          @update-todo=${this.handleUpdateTodo}>
        &lt;/todo-list>

        &lt;div class="actions">
          &lt;button
            class="clear-completed"
            @click=${this.handleClearCompleted}
            ?disabled=${this.model.completedCount === 0}>
            Clear Completed
          &lt;/button>
          &lt;button
            class="clear-all"
            @click=${this.handleClearAll}
            ?disabled=${this.todos.length === 0}>
            Clear All
          &lt;/button>
        &lt;/div>

        &lt;div class="footer">Lab 9: The final battle!&lt;/div>
      &lt;/div>
    `;
    }
}

/**
 * Shape of a single todo object stored in {@link TodoModel#todos}.
 *
 * @typedef {Object} TodoItemData
 * @property {number} id - Unique identifier.
 * @property {string} text - User-entered description.
 * @property {boolean} completed - Completion flag.
 * @property {string} [priority] - Optional priority (my addition).
 * @property {string} createdAt - ISO timestamp of creation.
 */

customElements.define('todo-app', TodoApp);</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.5</a> on Wed Nov 05 2025 10:52:47 GMT-0800 (Pacific Standard Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
